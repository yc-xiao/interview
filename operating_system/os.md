[toc]

### 操作系统
- 概念: 操作系统是管理硬件和软件的程序。栗子：操作系统管理微信，并给微信分配内存、CPU等资源。
- 功能: 对资源进行管理分配，如：处理机，存储器，文件，设备等资源进行管理分配。
- 特征: 并发、共享、虚拟、异步，并发与共享是互相存在，是虚拟与异步的前提。
    * 并发: 一段时间内处理多个事件。
    * 并发-并行: 同一时间点，多个事件同时处理。
    * 共享-互斥共享: 同一时间点，cpu只允许被单个线程使用。
    * 共享-同时共享: 一段时间内cpu被多个线程使用。
    * 虚拟-时分复用: cpu在一段时间(2s内)，1s给线程1，2s给线程2。即线程1跟2在2s内都用到了cpu。
    * 虚拟-空分复用: 内存１k在一段时间(2s内)，1s时先存储了线程1的数据1k，2s时存储了线程2的数据1k，即线程1跟线程2在2s内都用到了内存。内存在两s内总共可存储2k，忽略数据替换时间。
    * 异步: 略。
    * 总结: 对多个资源的使用，从宏观跟微观的角度分析。
- 运行机制:CPU具有多种形态，基本有用户态(非特权指令)[应用程序]、内核态(特权指令)[内核程序]
    * 用户态通过中断(唯一方式)进入内核态，内核态通过特权指令设置psw(程序状态)进入用户态。类似普通用户与root用户。
    * 中断: 内中断(cpu内部自愿中断，cpu内部故障[程序异常，硬件故障]) 外部中断(IO操作，用户ctrl+c)。
- 系统调用:系统调用使处理器从用户态进入核心态，对设备管理，文件管理，进程控制，进程通信，内存管理。

- 总结:
    1. 操作系统是管理硬件和软件的程序，具有并发、共享、虚拟、异步等特征。
    2. 为了保证系统安全性，它封装了处理器、存储器、IO设备、文件系统的管理并向用户提供接口。
    3. 用户可以通过系统调用获取系统资源，当应用程序在用户态时，通过调用系统提供的接口，中断进入内核态，并获取系统资源。
